query GetStocks(
  $search: String
  $status: String # ★復活: これがないとステータス絞り込みができない
  $rankingModes: [String!] # ★ここを修正（配列にする）
  $sector: String
  $limit: Int
  $offset: Int
  $sortBy: String
  $sortOrder: String
) {
  stocks(
    search: $search
    status: $status # ★復活
    rankingModes: $rankingModes # ★ここも修正
    sector: $sector
    limit: $limit
    offset: $offset
    sortBy: $sortBy
    sortOrder: $sortOrder
  ) {
    code
    name
    japaneseName
    market
    japaneseMarket # ★復活: 日本語表示用にあると便利
    sector17CodeName # OK: 新しい業種コード
    analysisResults {
      stockPrice
      status
      zScore
      grossProfitability
      expectationGap

      # ▼▼▼ 追加: カード表示用の基礎指標 ▼▼▼
      per
      pbr
      dividendYield
      roe
      # ▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲

      # --- Tags ---
      tagZombie
      tagSafetyShield
      tagQualityGrowth
      tagInstitutional
      tagCashCow
      tagSingleEngine
      tagSilentImprover
      tagTurnaround
      tagAccountingRisk
      tagHighVolatility
      tagFragile

      # --- Other Metrics ---
      fScore
      actualRevenueGrowth
      freeCashFlow
      operatingCf
      netIncome
    }
  }
}
